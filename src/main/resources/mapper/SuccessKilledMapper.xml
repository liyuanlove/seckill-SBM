<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.tan.seckill.mapper.SuccessKilledMapper">
  <resultMap id="BaseResultMap" type="org.tan.seckill.po.SuccessKilled">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="seckill_id" jdbcType="BIGINT" property="seckillId" />
    <id column="user_phone" jdbcType="BIGINT" property="userPhone" />
    <result column="state" jdbcType="TINYINT" property="state" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
  </resultMap>


  <select id="queryByIdWithSeckill" resultType="org.tan.seckill.po.SuccessKilled">

    <!--根据seckillId查询SuccessKilled对象，并携带Seckill对象-->
    <!--如何告诉mybatis把结果映射到SuccessKill属性同时映射到Seckill属性-->
    <!--可以自由控制SQL语句-->
    SELECT
    sk.seckill_id,
    sk.user_phone,
    sk.create_time,
    sk.state,
    s.seckill_id "seckill.seckill_id",
    s.name "seckill.name",
    s.number "seckill.number",
    s.start_time "seckill.start_time",
    s.end_time "seckill.end_time",
    s.create_time "seckill.create_time"
    FROM success_killed sk
    INNER JOIN seckill s ON sk.seckill_id=s.seckill_id
    WHERE sk.seckill_id=#{seckillId}
    AND sk.user_phone=#{userPhone}
  </select>
</mapper>